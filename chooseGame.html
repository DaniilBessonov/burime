<html>
	<head>
		<script src='starts.js'></script>
		<script src="../js/jquery-3.0.0.js"></script>
		<link rel="stylesheet" type="text/css" href="css/styles.css">
		<title>Присоедениться</title>
		<style>
			td { width:250px; }
		</style>
	</head>
	<body>
		<!-- Версия для любого экрана -->
		<center>
			<h1>Присоедениться</h1>
			<h2>
				Доступные игры:
			</h2>
			<p class="small">Кликните по строчке, чтобы перейти в зал ождания игры</p>
			<table id="games">
				<tr>
					<td>
						<h2>
						Тема игры
						</h2>
					</td>
					<td>
						<h2>
						Админ игры
						</h2>
					</td>
				</tr>
			</table>
			<button class='red' onclick="go('index.html')">
				Назад
			</button>
		</center>
		<script>
				getActiveGames();
				
				function getActiveGames() {
					callAPI('getActiveGames', undefined, function(result){
						console.log(result);
						for (var i=0; i<result.length; i++){
								 /* TODO Выводить ник админа игры
								 callAPI('getActiveGames', result[i].id, function(resultAdmin){
									console.log(resultAdmin);
								}); */
								var html = '<td><a>'+result[i].topic+'</a></td><td>'+result[i].login+'</td>';
								$('#games').append('<tr class="trans" onclick="go(\'wait.php?game_id='+result[i].id+'\')">'+html+'</tr>');
							}	
					});					
				}
		</script>
	</body>
</html>